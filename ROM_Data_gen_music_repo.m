clc;
% Antenna Pattern Generation
P_shift=[0.283510247417270;0.273541697821717;0.263837783216413;0.254399573012806;0.245228013221565;0.236323928305000;0.227688023019953;0.219320884251144;0.211222982834987;0.203394675373862;0.195836206040860;0.188547708374981;0.181529207066805;0.174780619734618;0.168301758691010;0.162092332699925;0.156151948724188;0.150480113663483;0.145076236082803;0.139939627931360;0.135069506251955;0.130464994880820;0.126125126137914;0.122048842507691;0.118234998310322;0.114682361363389;0.111389614634039;0.108355357881597;0.105578109290652;0.103056307094598;0.100788311189643;0.0987724047392747;0.0970067957692025;0.0954896187527489;0.0942189361867127;0.0931927401576929;0.0924089538988759;0.0918654333372873;0.0915599686315052;0.0914902856998389;0.0916540477389696;0.0920488567330546;0.0926722549532957;0.0935217264479702;0.0945946985229255;0.0958885432125372;0.0974005787411303;0.0991280709748644;0.101068234864081;0.103218235876117;0.105575191418576;0.108136172253071;0.110898203899421;0.113858268030323;0.117013303856472;0.120360209502161;0.123895843371328;0.127617025504083;0.131520538923682;0.135603130973981;0.139861514647334;0.144292369902974;0.148892344975846;0.153658057675904;0.158586096677873;0.163673022801478;0.168915370282131;0.174309648032082;0.179852340892036;0.185539910873232;0.191368798389987;0.197335423482699;0.203436187031319;0.209667471959280;0.216025644427898;0.222507055021226;0.229108039921382;0.235824922074331;0.242654012346136;0.249591610669672;0.256634007181800;0.263777483351008;0.271018313095516;0.278352763891838;0.285777097873815;0.293287572922106;0.300880443744150;0.308551962944575;0.316298382086095;0.324115952740846;0.332000927532199;0.339949561167038;0.347958111458489;0.356022840339127;0.364140014864636;0.372305908207936;0.380516800643777;0.388768980523786;0.397058745241991;0.405382402190797;0.413736269707432;0.422116678010852;0.430519970129116;0.438942502817215;0.447380647465372;0.455830790997803;0.464289336761938;0.472752705408114;0.481217335759721;0.489679685673819;0.498136232892213;0.506583475882998;0.515017934672561;0.523436151668045;0.531834692470290;0.540210146677216;0.548559128677691;0.556878278435845;0.565164262265860;0.573413773597212;0.581623533730389;0.589790292583062;0.597910829426723;0.605981953613789;0.614000505295164;0.621963356128271;0.629867409975540;0.637709603593364;0.645486907311520;0.653196325703046;0.660834898244594;0.668399699967229;0.675887842097708;0.683296472690213;0.690622777248550;0.697863979338809;0.705017341192495;0.712080164300111;0.719049789995212;0.725923600028923;0.732699017134916;0.739373505584851;0.745944571734286;0.752409764559042;0.758766676182037;0.765012942390582;0.771146243144141;0.777164303072552;0.783064891964716;0.788845825247742;0.794504964456563;0.800040217694013;0.805449540081363;0.810730934199327;0.815882450519527;0.820902187826422;0.825788293629704;0.830538964567150;0.835152446797947;0.839627036386472;0.843961079676537;0.848152973656102;0.852201166312450;0.856104156977817;0.859860496665500;0.863468788396414;0.866927687516126;0.870235902002334;0.873392192762832;0.876395373923924;0.879244313109299;0.881937931709383;0.884475205141135;0.886855163098333;0.889076889792292;0.891139524183073;0.893042260201138;0.894784346959473;0.896365088956181;0.897783846267528;0.899040034731458;0.900133126121573;0.901062648311568;0.901828185430145;0.902429378006373;0.902865923105517;0.903137574455342;0.903244142562864;0.903185494821572;0.902961555609113;0.902572306375441;0.902017785721427;0.901298089467935;0.900413370715358;0.899363839893623;0.898149764802650;0.896771470643290;0.895229340038703;0.893523813046227;0.891655387159686;0.889624617302179;0.887432115809318;0.885078552402942;0.882564654155289;0.879891205443626;0.877059047895356;0.874069080323571;0.870922258653081;0.867619595836907;0.864162161763228;0.860551083152797;0.856787543446821;0.852872782685306;0.848808097375858;0.844594840352954;0.840234420627672;0.835728303227897;0.831078009028962;0.826285114574793;0.821351251889468;0.816278108279298;0.811067426125310;0.805721002666243;0.800240689771981;0.794628393707450;0.788886074886992;0.783015747619199;0.777019479842189;0.770899392849378;0.764657661005695;0.758296511454261;0.751818223813545;0.745225129864964;0.738519613230960;0.731704109043534;0.724781103603256;0.717753134028716;0.710622787896461;0.703392702871371;0.696065566327534;0.688644114959539;0.681131134384274;0.673529458733164;0.665841970234879;0.658071598788495;0.650221321527145;0.642294162372104;0.634293191577348;0.626221525264591;0.618082324948759;0.609878797053944;0.601614192419823;0.593291805798535;0.584914975342013;0.576487082079793;0.568011549387288;0.559491842444518;0.550931467685286;0.542333972236862;0.533702943350091;0.525042007819970;0.516354831396718;0.507645118187257;0.498916610047218;0.490173085963357;0.481418361426466;0.472656287794734;0.463890751647578;0.455125674129930;0.446365010287002;0.437612748389488;0.428872909249260;0.420149545525508;0.411446741021354;0.402768609970906;0.394119296316812;0.385502972978253;0.376923841109407;0.368386129348365;0.359894093056523;0.351452013548446;0.343064197312168;0.334734975219984;0.326468701729680;0.318269754076242;0.310142531454031;0.302091454189416;0.294120962903857;0.286235517667468;0.278439597143061;0.270737697720602;0.263134332642176;0.255634031117394;0.248241337429272;0.240960810030573;0.233797020630606;0.226754553272493;0.219838003400891;0.213051976920196;0.206401089243210;0.199889964330232;0.193523233718639;0.187305535542983;0.181241513545447;0.175335816076834;0.169593095088018;0.164018005111825;0.158615202235419;0.153389343063087;0.148345083669580;0.143487078543821;0.138819979523173;0.134348434718066;0.130077087427175;0.126010575043001;0.122153527947974;0.118510568400965;0.115086309414284;0.111885353621139;0.108912292133573;0.106171703390844;0.103668151998267;0.101406187556524;0.0993903434814928;0.0976251358144033];
P_shift=round(P_shift,7);
[N,I]=max(P_shift);
P_C=P_shift(120:240,:);
P_L=P_shift(61:181,:);
P_R=P_shift(185:305,:);
% P_R=P_shift(183:243,:);

plot (P_C)
hold on
plot (P_R)
plot (P_L)
T_C=fix(P_C*2^12);
T_L=fix(P_L*2^12);
T_R=fix(P_R*2^12);
B_C=dec2bin(T_C);
B_L=dec2bin(T_L);
B_R=dec2bin(T_R);
%ROM_Data=[B_R B_C B_L];
ROM_Data=[B_L B_C B_R];
ROM_Data=[zeros(1,36);ROM_Data];
ROM_Bin=bin2dec(ROM_Data);
ROM_data_z=padarray(ROM_Bin,7,0,'post');
ROM=[ROM_data_z;ROM_data_z;ROM_data_z;ROM_data_z;ROM_data_z;ROM_data_z];
S_V=[P_L P_C P_R];
grid on;
%hold off
%ROM  data for 60 degree
ROM_less=ROM(35:105);